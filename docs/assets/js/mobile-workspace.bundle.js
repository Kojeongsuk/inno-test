(()=>{"use strict";const e={show(e="ë¡œë”© ì¤‘..."){let t=document.getElementById("mobileLoadingOverlay");t?t.classList.remove("hidden"):(t=document.createElement("div"),t.id="mobileLoadingOverlay",t.className="fixed inset-0 bg-black/60 flex items-center justify-center z-[9999]",t.innerHTML=`\n        <div class="bg-white rounded-xl px-6 py-4 text-center shadow-lg">\n          <div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"></div>\n          <p class="text-gray-700 text-sm">${e}</p>\n        </div>\n      `,document.body.appendChild(t))},hide(){const e=document.getElementById("mobileLoadingOverlay");e&&e.classList.add("hidden")}},t="localhost"===location.hostname||"127.0.0.1"===location.hostname||location.hostname.includes("app.github.dev")?"http://127.0.0.1:5050":"https://port-0-innomax-mghorm7bef413a34.sel3.cloudtype.app";async function o(){try{if(e.show("ë¡œë”© ì¤‘..."),!function(){const e=localStorage.getItem("user");if(!e)return alert("ì„¸ì…˜ ë§Œë£Œ ë˜ëŠ” ë¹„ì •ìƒ ì ‘ê·¼ì…ë‹ˆë‹¤."),window.location.href="index.html",!1;const o=JSON.parse(e),n=document.getElementById("userName"),l=document.getElementById("userRole");n&&(n.textContent=o.name),l&&(l.textContent="SWíŒ€");const c=o.loginTime;if(Date.now()-c>18e5)return alert("ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”."),localStorage.clear(),window.location.href="index.html",!1;const a=document.getElementById("btnLogout");return a&&a.addEventListener("click",async()=>{if(confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){localStorage.clear();try{await fetch(`${t}/api/logout`,{method:"POST",credentials:"include"})}catch{}window.location.href="index.html"}}),history.pushState(null,"",location.href),window.onpopstate=function(){history.go(1)},!0}())return;console.log("ğŸ§­ [Mobile_Workspace] ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œì‘"),function(){const e=document.getElementById("dashboard");if(!e)return;const t=e.querySelector("#currentTime");function o(){const e=new Date;t.textContent=e.toLocaleTimeString("ko-KR",{hour12:!1})}o(),setInterval(o,1e3),console.log("ğŸ  [Mobile_DashBoard] í™ˆ ì´ˆê¸°í™” ì™„ë£Œ")}(),console.log("âœ… [Mobile_Workspace] ëª¨ë“  ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ"),n().then(l),setInterval(async()=>{l(await n())},5e3),console.log("ğŸ“¦ [Mobile_Workspace] ì—…ë¬´ Pool ì´ˆê¸°í™” ì‹œì‘"),function(e){console.log("ğŸš€ [SET-UP] ì´ˆê¸°í™” ì‹œì‘");const t=document.getElementById("mobile_set_up_section"),o=document.querySelector("[data-tab='mobile_set_up']"),n=document.getElementById("setupOrderSelect"),l=document.getElementById("btnLoadYesterdayWork"),c=document.getElementById("setupProgressPercent"),a=document.getElementById("setupProgressPercentLabel"),r=document.getElementById("setupLoadedWork");document.getElementById("setupWorkInput"),t&&o?(o.addEventListener("click",()=>{document.querySelectorAll("section.tab-section, section[id^='mobile_']").forEach(e=>e.classList.add("hidden")),t.classList.remove("hidden"),window.scrollTo(0,0)}),l.addEventListener("click",async()=>{const t=n.value;if(t){l.textContent="ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",l.disabled=!0;try{const o=await fetch(`${e}/api/mobile/set-up/yesterday?order_id=${t}`),n=await o.json();r.textContent=n.text||"ì „ë‚  ì—…ë¬´ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.",c.value=n.percent||"0",a.textContent=`(${c.value}%)`}catch(e){console.error("âŒ ì „ë‚  ì—…ë¬´ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:",e),r.textContent="ì „ë‚  ì—…ë¬´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."}finally{l.textContent="ì „ë‚  ì—…ë¬´ ë¶ˆëŸ¬ì˜¤ê¸°",l.disabled=!1}}else alert("âš ï¸ ë¨¼ì € ìˆ˜ì£¼ê±´ì„ ì„ íƒí•´ì£¼ì„¸ìš”.")}),c.addEventListener("input",()=>{a.textContent=`(${c.value}%)`}),async function(){try{n.innerHTML='<option value="">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</option>';const t=await fetch(`${e}/api/mobile/orders`,{method:"GET"}),o=await t.json();n.innerHTML='<option value="">ìˆ˜ì£¼ê±´ì„ ì„ íƒí•˜ì„¸ìš”</option>',o.forEach(e=>{const t=document.createElement("option");t.value=e.id,t.textContent=`${e.project_name} (${e.customer})`,n.appendChild(t)})}catch(e){console.error("âŒ ìˆ˜ì£¼ê±´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:",e),n.innerHTML='<option value="">ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨</option>'}}(),console.log("âœ… [SET-UP] ì´ˆê¸°í™” ì™„ë£Œ")):console.warn("âš ï¸ [SET-UP] section ë˜ëŠ” ë²„íŠ¼ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")}(t),console.log("ğŸš€ [A/S] ì´ˆê¸°í™” ì™„ë£Œ"),console.log("ğŸš€ [TEST] ì´ˆê¸°í™” ì™„ë£Œ"),console.log("ğŸš€ [DOC] ì´ˆê¸°í™” ì™„ë£Œ")}catch(e){console.error("âŒ [Mobile_Workspace] ì´ˆê¸°í™” ì˜¤ë¥˜:",e),alert("ëª¨ë°”ì¼ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{e.hide()}}async function n(){try{const e=await fetch(`${t}/api/health`,{cache:"no-store"});if(!e.ok)throw new Error("HTTP "+e.status);return!0}catch{return!1}}function l(e){const t=document.getElementById("serverStatus");t&&(e?(t.textContent="ì„œë²„ ì—°ê²°ë¨",t.classList.remove("before:text-red-500","text-gray-400"),t.classList.add("before:text-green-400","text-green-300")):(t.textContent="ì„œë²„ ì—°ê²° ëŠê¹€",t.classList.remove("before:text-green-400","text-green-300"),t.classList.add("before:text-red-500","text-gray-400")))}console.log("ğŸ“± [Mobile_Workspace] ì´ˆê¸°í™” ì‹œì‘"),document.addEventListener("DOMContentLoaded",()=>{o()}),document.addEventListener("DOMContentLoaded",()=>{o();const e=document.querySelectorAll("[data-tab]");console.log("ğŸ“± [Mobile_Workspace] ë°ì´í„°-íƒ­ ë²„íŠ¼ ìˆ˜:",e.length),e.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.tab;if(!t)return;console.log(`[MOBILE TAB] í´ë¦­ë¨ â†’ ${t}`),document.querySelectorAll("[id^='mobile_panel-']").forEach(e=>e.classList.add("hidden"));const o=document.getElementById(`mobile_panel-${t}`);if(!o)return void console.error(`[MOBILE TAB] íŒ¨ë„ ì—†ìŒ: mobile_panel-${t}`);o.classList.remove("hidden");const n=document.getElementById("mobileSidebar");n&&n.classList.add("hidden")})})})})();
//# sourceMappingURL=mobile-workspace.bundle.js.map